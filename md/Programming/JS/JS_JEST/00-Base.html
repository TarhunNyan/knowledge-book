<input type="checkbox" id="isClose"></input><div class="left-menu"><div class="control-panel"><label for="isClose"><div class="isClose"></div></label></div><div class="left-side-menu"><ul><a href="#jest"><li>JEST</li></a><ul><a href="#базовое-описание"><li>Базовое описание</li></a></ul><a href="#настройка"><li>Настройка</li></a><ul><a href="#базовая-настройка"><li>Базовая настройка</li></a></ul><a href="#запуск"><li>Запуск</li></a><ul><a href="#запуск-всех-тестов"><li>Запуск всех тестов</li></a><a href="#запуск-одного-файла"><li>Запуск одного файла</li></a><a href="#запуск-тестов-по-шаблону"><li>Запуск тестов по шаблону</li></a></ul><a href="#проведение-тестирования"><li>Проведение тестирования</li></a><ul><a href="#создание-теста"><li>Создание теста</li></a><a href="#проводим-только-один-test"><li>Проводим только один Test</li></a><a href="#создание-набора-тестов"><li>Создание набора тестов</li></a></ul><a href="#функции-проверки"><li>Функции проверки</li></a><ul><a href="#сравнение-примитивов"><li>Сравнение примитивов</li></a><a href="#логические-операции"><li>Логические операции</li></a><a href="#сравнение-строк"><li>Сравнение строк</li></a><a href="#сравнение-коллекций"><li>Сравнение коллекций</li></a><a href="#функции"><li>Функции</li></a><a href="#исключения"><li>Исключения</li></a><a href="#асинхронные-код"><li>Асинхронные код</li></a></ul></ul></div></div><div class="main"><link rel="stylesheet" href="../../../static/style.css "><h1 id="jest">JEST</h1>
<p>JS библиотека для тестирования</p>
<h2 id="базовое-описание">Базовое описание</h2>
<p>Библиотека использует три базовых понятия:</p>
<ul>
<li>Tests - сами тесты, в которых делаем конкретную проверку</li>
<li>Test Suites - набор тестов, которые объеденины программистом по какому-то признаку</li>
<li>Shapshot - снимок html. Хранит файлик с которым потом сравнивает во время тестироваия и если не совпадает, то выдает ошибку</li>
</ul>
<p>Также показывает console.log, которые были вызваны во время проведения тестов. Очень удобно</p>
<h1 id="настройка">Настройка</h1>
<h2 id="базовая-настройка">Базовая настройка</h2>
<p>Скачиваем jest:</p>
<pre><code class="hljs language-bash">npm install --save-dev jest
</code></pre>
<p>Добавляем комманду для тестирования в package.json:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    ...<span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;test&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jest&quot;</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    ...
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Запускаем:</p>
<pre><code class="hljs language-bash">npm run <span class="hljs-built_in">test</span>
</code></pre>
<h1 id="запуск">Запуск</h1>
<h2 id="запуск-всех-тестов">Запуск всех тестов</h2>
<p>В проекте создаются файлы типа:</p>
<pre><code class="hljs language-bash">file_name.test.js
</code></pre>
<p>И когда мы запускаем JEST:</p>
<pre><code class="hljs language-bash">jest
</code></pre>
<p>Находит все .test.js и запускает их:</p>
<pre><code class="hljs language-bash">...
Test Suites: 0 passed, 0 total
Tests:       0 passed, 0 total
Snapshots:   0 total
Time:        0.001 s
</code></pre>
<h2 id="запуск-одного-файла">Запуск одного файла</h2>
<p>Запускаем один тестовый файл:</p>
<pre><code class="hljs language-bash">jest ./path_to/filename.test.js
</code></pre>
<h2 id="запуск-тестов-по-шаблону">Запуск тестов по шаблону</h2>
<p>Запускаем всех файлов с именем my-test.js:</p>
<pre><code class="hljs language-bash">jest my-test
</code></pre>
<h1 id="проведение-тестирования">Проведение тестирования</h1>
<h2 id="создание-теста">Создание теста</h2>
<p>За проведение теста отвечает test, сокращенно it:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">test</span>(<span class="hljs-string">&quot;Текст выводящийся при тестирование&quot;</span>, <span class="hljs-function">() =&gt;</span> {
	<span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_function</span>(test_data)).<span class="hljs-title function_">toBe</span>(expect_data);
});
</code></pre>
<p>При тестировании асинхронного запроса, можно добавить необязательный параметр - время ожидания ответа:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">test</span>(
    <span class="hljs-string">&#x27;Текст ...&#x27;</span>,
    <span class="hljs-function">() =&gt;</span> { ... },
    <span class="hljs-number">0.5</span>
)
</code></pre>
<h2 id="проводим-только-один-test">Проводим только один Test</h2>
<p>Если падает Test и естьподозрения что в этом виноваты другие тесты, то используй only:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">test</span>( <span class="hljs-string">&#x27;test1&#x27;</span>, <span class="hljs-function">() =&gt;</span> { ... } );
test.<span class="hljs-title function_">only</span>( <span class="hljs-string">&#x27;test2&#x27;</span>, <span class="hljs-function">() =&gt;</span> { ... } );
<span class="hljs-title function_">test</span>( <span class="hljs-string">&#x27;test3&#x27;</span>, <span class="hljs-function">() =&gt;</span> { ... } );
</code></pre>
<h2 id="создание-набора-тестов">Создание набора тестов</h2>
<p>Можно создать одно окружение сразу для нескольких тестов и обращаться к нему. Для этого используй describe:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&quot;Текст набора тестов&quot;</span>, <span class="hljs-function">() =&gt;</span> {
	<span class="hljs-keyword">const</span> testCase = [
		{
			<span class="hljs-attr">input</span>: <span class="hljs-string">&quot;hello&quot;</span>,
			<span class="hljs-attr">output</span>: <span class="hljs-string">&quot;olleh&quot;</span>,
		},
		{
			<span class="hljs-attr">input</span>: <span class="hljs-string">&quot;text&quot;</span>,
			<span class="hljs-attr">output</span>: <span class="hljs-string">&quot;txet&quot;</span>,
		},
	];
	testCase.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
		<span class="hljs-title function_">test</span>(testCase.<span class="hljs-property">input</span>, <span class="hljs-function">() =&gt;</span> {
			<span class="hljs-title function_">testFunc</span>(el.<span class="hljs-property">input</span>).<span class="hljs-title function_">toBe</span>(el.<span class="hljs-property">output</span>);
		});
	});
});
</code></pre>
<h1 id="функции-проверки">Функции проверки</h1>
<p>Для проведения тестов, получившееся значение лежащее в expect нужно сравнить с ожидаемым. Для этого в JEST сузествует свой набор функций</p>
<h2 id="сравнение-примитивов">Сравнение примитивов</h2>
<p>Равенство примитивов, toBe:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-title function_">toBe</span>(expect_data);
</code></pre>
<p>Проверка ключей проверяемого объекта, toBe:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data).<span class="hljs-property">test_key</span>).<span class="hljs-title function_">toBe</span>(expect_data);
</code></pre>
<p>Проверка float на равенство, toBeCloseTo:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-title function_">toBeCloseTo</span>(expect_data, expect_digits);
</code></pre>
<p>Математические сравнения:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Функция</th>
<th style="text-align:left">Математический аналог</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.toBeGreaterThan</td>
<td style="text-align:left">&gt;</td>
</tr>
<tr>
<td style="text-align:left">.toBeGreaterThanOrEqual</td>
<td style="text-align:left">&gt;=</td>
</tr>
<tr>
<td style="text-align:left">.toBeLess</td>
<td style="text-align:left">&lt;</td>
</tr>
<tr>
<td style="text-align:left">.toBeLessThanOrEqual</td>
<td style="text-align:left">&lt;=</td>
</tr>
</tbody>
</table>
<h2 id="логические-операции">Логические операции</h2>
<p>Отрицание результата, not:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-property">not</span>.<span class="hljs-title function_">toBe</span>(expect_data);
</code></pre>
<p>Проверка на то, является ли:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Имя функции</th>
<th style="text-align:left">Чем является результат</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.toBeNull</td>
<td style="text-align:left">Является ли null</td>
</tr>
<tr>
<td style="text-align:left">.toBeUndefined</td>
<td style="text-align:left">Является ли undefied</td>
</tr>
<tr>
<td style="text-align:left">.toBeDefined</td>
<td style="text-align:left">Является ли НЕ undefied</td>
</tr>
<tr>
<td style="text-align:left">.toBeTruthy</td>
<td style="text-align:left">Является ли НЕ: 0, '', [], false, null, undefined</td>
</tr>
<tr>
<td style="text-align:left">.toBeFalsy</td>
<td style="text-align:left">Является ли: 0, '', [], false, null, undefined</td>
</tr>
</tbody>
</table>
<h2 id="сравнение-строк">Сравнение строк</h2>
<p>Проверка соответствия строки регулярному выражению:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-string">&quot;Вася&quot;</span>).<span class="hljs-title function_">toMatch</span>(<span class="hljs-regexp">/ася/</span>);
</code></pre>
<h2 id="сравнение-коллекций">Сравнение коллекций</h2>
<p>Сравнение коллекций. Делает рекурсивные проверки для array и object, функция toEqual:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-title function_">toEqual</span>(expect_data);
</code></pre>
<p>Содержит ли массив или иттерируемый объект значение, toContain:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">&quot;milk&quot;</span>, <span class="hljs-string">&quot;dipers&quot;</span>];
<span class="hljs-title function_">expect</span>(arr).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">&quot;milk&quot;</span>);
</code></pre>
<h2 id="функции">Функции</h2>
<p>Была ли функция вообще вызвана, toHaveBeenCalled:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> func = jest.<span class="hljs-title function_">fn</span>();
<span class="hljs-title function_">func</span>();
<span class="hljs-title function_">expect</span>(func).<span class="hljs-title function_">toHaveBeenCalled</span>();
</code></pre>
<p>Проверяет, сколько раз функция бала вызвана, toHaveBeenCalledTimes:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> func = jest.<span class="hljs-title function_">fn</span>();
<span class="hljs-title function_">func</span>();
<span class="hljs-title function_">expect</span>(func).<span class="hljs-title function_">toHaveBeenCalledTimes</span>(<span class="hljs-number">1</span>);
</code></pre>
<h2 id="исключения">Исключения</h2>
<p>Проаерка возврата ошибки, toTrow:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">test_func</span>()).<span class="hljs-title function_">toThrow</span>();
<span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">test_func</span>()).<span class="hljs-title function_">toThrow</span>(<span class="hljs-string">&quot;Error text&quot;</span>);
<span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">test_func</span>()).<span class="hljs-title function_">toThrow</span>(<span class="hljs-regexp">/regexp for text error/</span>);
</code></pre>
<h2 id="асинхронные-код">Асинхронные код</h2>
<p>Проверить resolves:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-property">resolves</span>.<span class="hljs-title function_">toBe</span>(expect_data);
</code></pre>
<p>Проверить rejects:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">expect</span>(<span class="hljs-title function_">test_func</span>(test_data)).<span class="hljs-property">rejects</span>.<span class="hljs-title function_">toBe</span>(expect_data);
</code></pre>
</div>